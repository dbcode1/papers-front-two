{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dmbru/Code/papers/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/dmbru/Code/papers/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{setAlert}from\"./alert\";import store from\"../store\";import\"dotenv/config\";import{REGISTER_SUCCESS,REGISTER_FAIL,USER_LOADED,AUTH_ERROR,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT,DELETE_USER,SET_ALERT}from\"./types\";import setAuthToken from\"../utils/setAuthToken\";// Load User\nexport var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://papers-back-382b4d134cec.herokuapp.com/auth\");case 3:res=_context.sent;dispatch({type:USER_LOADED,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:AUTH_ERROR});case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Register User\nexport var register=function register(_ref2){var name=_ref2.name,email=_ref2.email,password=_ref2.password;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(\"register\");config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({name:name,email:email,password:password});_context2.prev=3;_context2.next=6;return axios.post(\"https://papers-back-382b4d134cec.herokuapp.com/user\",body,config);case 6:res=_context2.sent;dispatch({type:REGISTER_SUCCESS,payload:res.data});dispatch(loadUser());_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);alert(_context2.t0.response.data.errors[0].param+\": \"+_context2.t0.response.data.errors[0].msg);dispatch({type:REGISTER_FAIL});case 15:case\"end\":return _context2.stop();}},_callee2,null,[[3,11]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};// Login User\nexport var login=function login(email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context3.prev=1;body=JSON.stringify({email:email,password:password});_context3.next=5;return axios.post(\"https://papers-back-382b4d134cec.herokuapp.com/auth/login\",body,config);case 5:res=_context3.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(loadUser());_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);alert(// err.response.data.errors[0].param + \": \" + err.response.data.errors[0].msg\n_context3.t0);case 13:case\"end\":return _context3.stop();}},_callee3,null,[[1,10]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();};// Logout\nexport var logout=function logout(){return function(dispatch){dispatch({type:LOGOUT});};};// Delete User Account\nexport var deleteUser=function deleteUser(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var body;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;body=store.getState().auth.token;window.confirm(\"Are you sure you want to delete your account\");localStorage.clear();_context4.next=6;return axios.delete(\"https://papers-back-382b4d134cec.herokuapp.com/user\",body);case 6:_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);alert(_context4.t0.response.data.errors[0].msg);case 11:case\"end\":return _context4.stop();}},_callee4,null,[[0,8]]);}));return function(_x4){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","setAlert","store","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","DELETE_USER","SET_ALERT","setAuthToken","loadUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","res","wrap","_callee$","_context","prev","next","get","sent","type","payload","data","t0","stop","_x","apply","arguments","register","_ref2","name","email","password","_ref3","_callee2","config","body","_callee2$","_context2","console","log","headers","JSON","stringify","post","alert","response","errors","param","msg","_x2","login","_ref4","_callee3","_callee3$","_context3","_x3","logout","deleteUser","_ref5","_callee4","_callee4$","_context4","getState","auth","token","window","confirm","localStorage","clear","delete","_x4"],"sources":["C:/Users/dmbru/Code/papers/client/src/actions/auth.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { setAlert } from \"./alert\";\r\nimport store from \"../store\";\r\nimport \"dotenv/config\";\r\n\r\nimport {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n  DELETE_USER,\r\n  SET_ALERT,\r\n} from \"./types\";\r\nimport setAuthToken from \"../utils/setAuthToken\";\r\n\r\n// Load User\r\nexport const loadUser = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\r\n      \"https://papers-back-382b4d134cec.herokuapp.com/auth\"\r\n    );\r\n\r\n    dispatch({\r\n      type: USER_LOADED,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: AUTH_ERROR,\r\n    });\r\n  }\r\n};\r\n\r\n// Register User\r\nexport const register =\r\n  ({ name, email, password }) =>\r\n  async (dispatch) => {\r\n    console.log(\"register\");\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const body = JSON.stringify({ name, email, password });\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        \"https://papers-back-382b4d134cec.herokuapp.com/user\",\r\n        body,\r\n        config\r\n      );\r\n\r\n      dispatch({\r\n        type: REGISTER_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n      dispatch(loadUser());\r\n    } catch (err) {\r\n      alert(\r\n        err.response.data.errors[0].param +\r\n          \": \" +\r\n          err.response.data.errors[0].msg\r\n      );\r\n\r\n      dispatch({\r\n        type: REGISTER_FAIL,\r\n      });\r\n    }\r\n  };\r\n\r\n// Login User\r\nexport const login = (email, password) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  try {\r\n    const body = JSON.stringify({ email, password });\r\n\r\n    const res = await axios.post(\r\n      \"https://papers-back-382b4d134cec.herokuapp.com/auth/login\",\r\n      body,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n\r\n    dispatch(loadUser());\r\n  } catch (err) {\r\n    alert(\r\n      // err.response.data.errors[0].param + \": \" + err.response.data.errors[0].msg\r\n      err\r\n    );\r\n  }\r\n};\r\n\r\n// Logout\r\nexport const logout = () => (dispatch) => {\r\n  dispatch({\r\n    type: LOGOUT,\r\n  });\r\n};\r\n\r\n// Delete User Account\r\nexport const deleteUser = () => async (dispatch) => {\r\n  try {\r\n    const body = store.getState().auth.token;\r\n    window.confirm(\"Are you sure you want to delete your account\");\r\n    localStorage.clear();\r\n\r\n    await axios.delete(\r\n      \"https://papers-back-382b4d134cec.herokuapp.com/user\",\r\n      body\r\n    );\r\n  } catch (err) {\r\n    alert(err.response.data.errors[0].msg);\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}